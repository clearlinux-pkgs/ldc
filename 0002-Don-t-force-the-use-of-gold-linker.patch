From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Arjan van de Ven <arjan@linux.intel.com>
Date: Sun, 24 Mar 2019 20:23:36 +0000
Subject: [PATCH] Don't force the use of gold linker

---
 CMakeLists.txt        | 1 -
 driver/linker-gcc.cpp | 4 ++--
 2 files changed, 2 insertions(+), 3 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 6b88b90..bd88f42 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -445,7 +445,6 @@ source_group("Source Files" FILES ${DRV_SRC_D})
 #
 # Configure the build system to use LTO and/or PGO while building LDC
 #
-include(HandleLTOPGOBuildOptions)
 
 #
 # Enable Dynamic compilation if supported for this platform and LLVM version.
diff --git a/driver/linker-gcc.cpp b/driver/linker-gcc.cpp
index b1e5038..b6ea168 100644
--- a/driver/linker-gcc.cpp
+++ b/driver/linker-gcc.cpp
@@ -578,8 +578,8 @@ void ArgsBuilder::addLinker() {
     // and older bfd versions stripping llvm.used symbols (e.g., ModuleInfo
     // refs) with --gc-sections (see #2870).
     // Can be overridden by `-linker=` (explicitly empty).
-    if (opts::linker.getNumOccurrences() == 0)
-      args.push_back("-fuse-ld=gold");
+    // if (opts::linker.getNumOccurrences() == 0)
+    //   args.push_back("-fuse-ld=gold");
   }
 }
 
